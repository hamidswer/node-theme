{"id":"../../node_modules/cross-domain-request/index.ts","dependencies":[{"name":"D:\\PROJECTS\\JS\\JS projects archive\\node-theme\\node_modules\\cross-domain-request\\tsconfig.json","includedInParent":true,"mtime":499162500000},{"name":"D:\\PROJECTS\\JS\\JS projects archive\\node-theme\\package.json","includedInParent":true,"mtime":1631425543850},{"name":"D:\\PROJECTS\\JS\\JS projects archive\\node-theme\\node_modules\\cross-domain-request\\package.json","includedInParent":true,"mtime":1631425006259}],"generated":{"js":"\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Method;\r\n(function (Method) {\r\n    Method[\"GET\"] = \"GET\";\r\n    Method[\"POST\"] = \"POST\";\r\n})(Method || (Method = {}));\r\nvar DEFAULT_OPTIONS = {\r\n    method: Method.POST,\r\n};\r\nvar HIDDEN_STYLES = {\r\n    display: 'none',\r\n    position: 'absolute',\r\n    left: '-900px',\r\n    top: '-900px',\r\n};\r\nvar HIDDEN_STYLES_STRING = Object.entries(HIDDEN_STYLES).map(function (_a) {\r\n    var prop = _a[0], val = _a[1];\r\n    return prop + \": \" + val;\r\n}).join(';');\r\n/**\r\n * Cross-domain request without CORS\r\n * @param  {string} url              URL for submission\r\n * @param  {Object} data             Submission data\r\n * @param  {Object} [options={}]     Form options\r\n */\r\nexports.default = (function (url, data, options) {\r\n    if (options === void 0) { options = {}; }\r\n    if (!url)\r\n        throw new Error('Missing url param');\r\n    options = __assign(__assign({}, DEFAULT_OPTIONS), options);\r\n    var isFormSubmited = false;\r\n    var id = String(Math.random()).replace('.', '');\r\n    var frameId = \"frame\" + id;\r\n    var formId = \"form\" + id;\r\n    var container = document.createRange().createContextualFragment(\"\\n    <div id=\\\"\" + id + \"\\\" style=\\\"\" + HIDDEN_STYLES_STRING + \"\\\">\\n      <iframe id=\\\"\" + frameId + \"\\\" name=\\\"\" + frameId + \"\\\"></iframe>\\n      <form id=\\\"\" + formId + \"\\\" target=\\\"\" + frameId + \"\\\" action=\\\"\" + url + \"\\\" method=\\\"\" + options.method + \"\\\" tabindex=\\\"-1\\\">\\n        \" + (data ? Object.entries(data).map(function (_a) {\r\n        var fieldName = _a[0], value = _a[1];\r\n        return \"<input type=\\\"text\\\" name=\\\"\" + fieldName + \"\\\" value='\" + value + \"' tabindex=\\\"-1\\\" />\";\r\n    }) : '') + \"\\n      </form>\\n    </div>\\n  \");\r\n    document.body.appendChild(container);\r\n    var containerEl = document.getElementById(id);\r\n    var form = document.getElementById(formId);\r\n    var frame = document.getElementById(frameId);\r\n    if (!containerEl || !form || !frame) {\r\n        throw new Error(\"Unable to create elements for transport\");\r\n    }\r\n    // FIXME: rewrite to https://developer.mozilla.org/en-US/docs/Web/API/Document/readystatechange_event\r\n    frame.addEventListener('load', function () {\r\n        // Clean up\r\n        if (isFormSubmited)\r\n            document.body.removeChild(containerEl);\r\n    });\r\n    form.submit();\r\n    isFormSubmited = true;\r\n});\r\n"},"sourceMaps":{"js":{"version":3,"file":"index.js","sourceRoot":"","sources":["../../node_modules/cross-domain-request/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,IAAK,MAGJ;AAHD,WAAK,MAAM;IACT,qBAAW,CAAA;IACX,uBAAa,CAAA;AACf,CAAC,EAHI,MAAM,KAAN,MAAM,QAGV;AAMD,IAAM,eAAe,GAAY;IAC/B,MAAM,EAAE,MAAM,CAAC,IAAI;CACpB,CAAA;AAED,IAAM,aAAa,GAAG;IACpB,OAAO,EAAE,MAAM;IACf,QAAQ,EAAE,UAAU;IACpB,IAAI,EAAE,QAAQ;IACd,GAAG,EAAE,QAAQ;CACd,CAAA;AAED,IAAM,oBAAoB,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,GAAG,CAAC,UAAC,EAAW;QAAV,IAAI,QAAA,EAAE,GAAG,QAAA;IAAM,OAAG,IAAI,UAAK,GAAK;AAAjB,CAAiB,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AAE5G;;;;;GAKG;AACH,mBAAe,UAAC,GAAW,EAAE,IAAQ,EAAE,OAAqB;IAArB,wBAAA,EAAA,YAAqB;IAC1D,IAAI,CAAC,GAAG;QAAE,MAAM,IAAI,KAAK,CAAC,mBAAmB,CAAC,CAAA;IAC9C,OAAO,yBAAQ,eAAe,GAAK,OAAO,CAAE,CAAA;IAE5C,IAAI,cAAc,GAAG,KAAK,CAAA;IAC1B,IAAM,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAA;IACjD,IAAM,OAAO,GAAG,UAAQ,EAAI,CAAA;IAC5B,IAAM,MAAM,GAAG,SAAO,EAAI,CAAA;IAC1B,IAAM,SAAS,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC,wBAAwB,CAAC,qBACrD,EAAE,mBAAY,oBAAoB,gCAC7B,OAAO,kBAAW,OAAO,uCAC3B,MAAM,oBAAa,OAAO,oBAAa,GAAG,oBAAa,OAAO,CAAC,MAAM,sCAC7E,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,UAAC,EAAkB;YAAjB,SAAS,QAAA,EAAE,KAAK,QAAA;QAClD,OAAA,iCAA4B,SAAS,kBAAY,KAAK,yBAAoB;IAA1E,CAA0E,CAC3E,CAAC,CAAC,CAAC,EAAE,qCAGX,CAAC,CAAA;IACF,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAA;IAEpC,IAAM,WAAW,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAA;IAC/C,IAAM,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAoB,CAAA;IAC/D,IAAM,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAsB,CAAA;IAEnE,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,EAAE;QACnC,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;KAC5D;IAED,qGAAqG;IACrG,KAAK,CAAC,gBAAgB,CAAC,MAAM,EAAE;QAC7B,WAAW;QACX,IAAI,cAAc;YAAE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAA;IAC5D,CAAC,CAAC,CAAC;IACH,IAAI,CAAC,MAAM,EAAE,CAAA;IACb,cAAc,GAAG,IAAI,CAAA;AACvB,CAAC,EAAA","sourcesContent":["enum Method {\n  GET = 'GET',\n  POST = 'POST',\n}\n\ntype Options = {\n  method?: Method\n}\n\nconst DEFAULT_OPTIONS: Options = {\n  method: Method.POST,\n}\n\nconst HIDDEN_STYLES = {\n  display: 'none',\n  position: 'absolute',\n  left: '-900px',\n  top: '-900px',\n}\n\nconst HIDDEN_STYLES_STRING = Object.entries(HIDDEN_STYLES).map(([prop, val]) => `${prop}: ${val}`).join(';')\n\n/**\n * Cross-domain request without CORS\n * @param  {string} url              URL for submission\n * @param  {Object} data             Submission data\n * @param  {Object} [options={}]     Form options\n */\nexport default (url: string, data: {}, options: Options = {}): void => {\n  if (!url) throw new Error('Missing url param')\n  options = { ...DEFAULT_OPTIONS, ...options }\n\n  let isFormSubmited = false\n  const id = String(Math.random()).replace('.', '')\n  const frameId = `frame${id}`\n  const formId = `form${id}`\n  const container = document.createRange().createContextualFragment(`\n    <div id=\"${id}\" style=\"${HIDDEN_STYLES_STRING}\">\n      <iframe id=\"${frameId}\" name=\"${frameId}\"></iframe>\n      <form id=\"${formId}\" target=\"${frameId}\" action=\"${url}\" method=\"${options.method}\" tabindex=\"-1\">\n        ${data ? Object.entries(data).map(([fieldName, value]) =>\n          `<input type=\"text\" name=\"${fieldName}\" value='${value}' tabindex=\"-1\" />`\n        ) : ''}\n      </form>\n    </div>\n  `)\n  document.body.appendChild(container)\n\n  const containerEl = document.getElementById(id)\n  const form = document.getElementById(formId) as HTMLFormElement\n  const frame = document.getElementById(frameId) as HTMLIFrameElement\n\n  if (!containerEl || !form || !frame) {\n    throw new Error(\"Unable to create elements for transport\");\n  }\n\n  // FIXME: rewrite to https://developer.mozilla.org/en-US/docs/Web/API/Document/readystatechange_event\n  frame.addEventListener('load', () => {\n    // Clean up\n    if (isFormSubmited) document.body.removeChild(containerEl)\n  });\n  form.submit()\n  isFormSubmited = true\n}\n"]}},"error":null,"hash":"70a58a188635b45dc2ea9d5ce270cc3d","cacheData":{"env":{}}}